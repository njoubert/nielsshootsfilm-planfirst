# Release v1.0.0 - Production Deployment Ready

**Release Date**: November 1, 2025

## Overview

First production-ready release of the nielsshootsfilm photography portfolio platform.

This turned into a major project, much larger than I expected! It includes:

- The novel dynamic-static website I envisioned, cleanly separated.
- Self-hosted on a Mac mini in my closet, behind cloudflare DNS with by router doing dynamic DNS updates to keep it online.
- LGTM monitoring stack for the server and nginx.
- Proper LaunchDaemons for the various moving parts.
- Over 250 tests

## Major Features

### Frontend (Static)

- **Public Gallery**: Browse albums and photos
- **Responsive Design**: Mobile-first, works on all screen sizes
- **Lightbox Viewer**: Full-screen photo viewing with keyboard navigation
- **Portfolio Mode**: Featured album showcase on homepage
- **Dark Mode**: Automatic theme switching based on system preference

### Admin Backend (Go)

- **Album Management**: Create, edit, and delete albums
- **Photo Upload**: Batch photo upload with drag-and-drop
- **Image Processing**: Automatic resize, EXIF extraction, thumbnail generation
- **Authentication**: Password-protected admin interface
- **RESTful API**: JSON API for frontend communication

### Deployment

- **macOS LaunchDaemon**: Production-ready service deployment
  - Auto-start on boot (before user login)
  - Automatic restart on crash (configurable)
  - Log rotation (30 days retention, 10MB size limit)
  - Comprehensive management script (`backend/scripts/deploy-macos.sh`)
- **Static Build**: Optimized frontend build for CDN/static hosting
- **Environment Configuration**: Explicit `--env-file` flag for binary

## Architecture

### Backend

- **Language**: Go 1.25
- **Web Framework**: go-chi/chi v5
- **Image Processing**: libvips (via govips)
- **Data Storage**: JSON files (no database)
- **Authentication**: bcrypt password hashing

### Frontend

- **Framework**: Lit (web components)
- **Build Tool**: Vite
- **Language**: TypeScript
- **Size**: ~5KB runtime (Lit library)

### Production Deployment

- **Backend**: macOS LaunchDaemon running as user service
- **Frontend**: Static files served via nginx/CDN
- **API Proxy**: nginx reverse proxy `/api` to backend port 6180

## Configuration

### Backend Environment Variables

```bash
DATA_DIR=/path/to/data              # JSON data files
UPLOAD_DIR=/path/to/uploads         # Photo storage
PORT=6180                           # Backend server port
ADMIN_USERNAME=admin                # Admin username
ADMIN_PASSWORD=secret               # Admin password (dev only)
CORS_ALLOWED_ORIGINS=http://...     # CORS configuration
MAX_FILE_SIZE=100                   # Max upload size (MB)
MAX_BATCH_SIZE=5000                 # Max batch upload (MB)
```

### Deployment Paths (macOS)

```text
/Users/user/webserver/sites/nielsshootsfilm.com/
  ├── dynamic/              # Backend binary and env
  │   ├── admin             # Go binary
  │   └── env               # Environment config
  ├── public/
  │   ├── data/             # JSON data files
  │   └── uploads/          # Photo uploads
  └── logs/                 # Service logs
```

## Management Commands

### Backend Service (macOS)

```bash
# Install and start service
./backend/scripts/deploy-macos.sh install

# Check status
./backend/scripts/deploy-macos.sh status

# View logs
./backend/scripts/deploy-macos.sh logs

# Restart service
./backend/scripts/deploy-macos.sh restart

# Stop service
./backend/scripts/deploy-macos.sh stop

# Uninstall service
./backend/scripts/deploy-macos.sh uninstall
```

### Development

```bash
# Start both frontend and backend
./dev.sh

# Run tests
./test.sh

# Format code
./fmt.sh

# Build for production
./build.sh
```

### Monitoring

#### Monitoring server

UptimeRobot is configured to monitor the public frontend at `https://nielsshootsfilm.com` with 5-minute checks.

Grafana is configured at `http://macminiserver.local:3000/` to monitor server metrics (CPU, memory, disk) via Prometheus node exporter, and to monitor nginx metrics.

#### Monitoring admin backend service

- Logs located at `/path/to/logs/nielsshootsfilm-admin.log` and `nielsshootsfilm-admin.error.log`
- Log rotation configured via `newsyslog`

## Breaking Changes

None - this is the first release.

## Known Issues

- Frontend requires manual build and deployment (no CI/CD)
- No automated backups for data/uploads
- Limited error recovery in photo upload

## Security Notes

- Admin password stored as bcrypt hash in `data/admin_config.json`
- Backend runs as non-root user via LaunchDaemon
- CORS configured for specific origins only
- No rate limiting implemented
- No HTTPS enforcement (handled by nginx)

## Testing

- ✅ Unit tests: Go backend handlers and services
- ✅ Unit tests: Frontend components and utilities
- ✅ Integration tests: API endpoints
- ✅ Manual E2E testing: Full user workflows
- ⚠️ No automated E2E tests

## Documentation

- `/docs/PLAN_MVP.md` - Original MVP planning
- `/docs/deployment/backend_on_macos.md` - Deployment architecture
- `/backend/README.md` - Backend development guide
- `/frontend/README.md` - Frontend development guide
- `/frontend/NAVIGATION_GUIDE.md` - Navigation patterns

## Future Work (Planned)

See `/docs/plan/` for detailed plans:

- Analytics integration
- Blog functionality
- Bulk photo export
- Concurrent upload improvements
- Open Graph meta tags
- SEO improvements
- Touch gesture support
- E2E testing framework

## Contributors

- Niels Joubert (@njoubert)

## License

All rights reserved - Private project
